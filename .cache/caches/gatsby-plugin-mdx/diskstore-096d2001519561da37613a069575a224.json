{"expireTime":9007200872306493000,"key":"gatsby-plugin-mdx-entire-payload-5d50e8ad1b5ca8bb901159e4416e9860-","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Developing smart contracts for Ethereum involves a bevy of off-chain tools used for producing and testing bytecode \nthat runs on the ","position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":3,"column":18,"offset":136},"indent":[1]}},{"type":"link","title":null,"url":"https://eth.wiki/en/concepts/evm/ethereum-virtual-machine-(evm)-awesome-list","children":[{"type":"text","value":"Ethereum Virtual Machine (EVM)","position":{"start":{"line":3,"column":19,"offset":137},"end":{"line":3,"column":49,"offset":167},"indent":[]}}],"position":{"start":{"line":3,"column":18,"offset":136},"end":{"line":3,"column":128,"offset":246},"indent":[]}},{"type":"text","value":".\nSome tools also include workflows for deploying this bytecode to the Ethereum network and testnets.\nThere are many options for these tools. This guide walks you through writing and testing a simple smart contract that\ninteracts with the Kwikswap Protocol using one specific set of tools (","position":{"start":{"line":3,"column":128,"offset":246},"end":{"line":6,"column":71,"offset":539},"indent":[1,1,1]}},{"type":"inlineCode","value":"truffle","position":{"start":{"line":6,"column":71,"offset":539},"end":{"line":6,"column":80,"offset":548},"indent":[]}},{"type":"text","value":" + ","position":{"start":{"line":6,"column":80,"offset":548},"end":{"line":6,"column":83,"offset":551},"indent":[]}},{"type":"inlineCode","value":"npm","position":{"start":{"line":6,"column":83,"offset":551},"end":{"line":6,"column":88,"offset":556},"indent":[]}},{"type":"text","value":" + ","position":{"start":{"line":6,"column":88,"offset":556},"end":{"line":6,"column":91,"offset":559},"indent":[]}},{"type":"inlineCode","value":"mocha","position":{"start":{"line":6,"column":91,"offset":559},"end":{"line":6,"column":98,"offset":566},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":6,"column":98,"offset":566},"end":{"line":6,"column":100,"offset":568},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":6,"column":100,"offset":568},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Requirements","position":{"start":{"line":8,"column":4,"offset":575},"end":{"line":8,"column":16,"offset":587},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":572},"end":{"line":8,"column":16,"offset":587},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To follow this guide, you must have the following installed:","position":{"start":{"line":10,"column":1,"offset":591},"end":{"line":10,"column":61,"offset":651},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":591},"end":{"line":10,"column":61,"offset":651},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://nodejs.org/en/","children":[{"type":"text","value":"nodejs >= v12.x & npm >= 6.x","position":{"start":{"line":12,"column":4,"offset":658},"end":{"line":12,"column":32,"offset":686},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":657},"end":{"line":12,"column":57,"offset":711},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":657},"end":{"line":12,"column":57,"offset":711},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":655},"end":{"line":12,"column":57,"offset":711},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":655},"end":{"line":12,"column":57,"offset":711},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Bootstrapping a project","position":{"start":{"line":14,"column":4,"offset":718},"end":{"line":14,"column":27,"offset":741},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":715},"end":{"line":14,"column":27,"offset":741},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can start from scratch, but it's easier to use a tool like ","position":{"start":{"line":16,"column":1,"offset":745},"end":{"line":16,"column":64,"offset":808},"indent":[]}},{"type":"inlineCode","value":"truffle","position":{"start":{"line":16,"column":64,"offset":808},"end":{"line":16,"column":73,"offset":817},"indent":[]}},{"type":"text","value":" to bootstrap an empty project. \nCreate an empty directory and run ","position":{"start":{"line":16,"column":73,"offset":817},"end":{"line":17,"column":35,"offset":885},"indent":[1]}},{"type":"inlineCode","value":"npx truffle init","position":{"start":{"line":17,"column":35,"offset":885},"end":{"line":17,"column":53,"offset":903},"indent":[]}},{"type":"text","value":" inside that directory to unbox the default \n","position":{"start":{"line":17,"column":53,"offset":903},"end":{"line":18,"column":1,"offset":949},"indent":[1]}},{"type":"link","title":null,"url":"https://www.trufflesuite.com/boxes","children":[{"type":"text","value":"Truffle box","position":{"start":{"line":18,"column":2,"offset":950},"end":{"line":18,"column":13,"offset":961},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":949},"end":{"line":18,"column":50,"offset":998},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":50,"offset":998},"end":{"line":18,"column":51,"offset":999},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":745},"end":{"line":18,"column":51,"offset":999},"indent":[1,1]}},{"type":"code","lang":"shell","meta":"script","value":"mkdir demo\ncd demo\nnpx truffle init","position":{"start":{"line":20,"column":1,"offset":1003},"end":{"line":24,"column":4,"offset":1062},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Setting up npm","position":{"start":{"line":26,"column":4,"offset":1069},"end":{"line":26,"column":18,"offset":1083},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1066},"end":{"line":26,"column":18,"offset":1083},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In order to reference the Kwikswap contracts, you should use the npm artifacts we deploy containing the core and\nperiphery smart contracts and interfaces. To add npm dependencies, we first initialize the npm package. \nWe can run ","position":{"start":{"line":28,"column":1,"offset":1087},"end":{"line":30,"column":12,"offset":1318},"indent":[1,1]}},{"type":"inlineCode","value":"npm init","position":{"start":{"line":30,"column":12,"offset":1318},"end":{"line":30,"column":22,"offset":1328},"indent":[]}},{"type":"text","value":" in the same directory to create a ","position":{"start":{"line":30,"column":22,"offset":1328},"end":{"line":30,"column":57,"offset":1363},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":30,"column":57,"offset":1363},"end":{"line":30,"column":71,"offset":1377},"indent":[]}},{"type":"text","value":" file. You can accept all the defaults and\nchange it later.","position":{"start":{"line":30,"column":71,"offset":1377},"end":{"line":31,"column":17,"offset":1437},"indent":[1]}}],"position":{"start":{"line":28,"column":1,"offset":1087},"end":{"line":31,"column":17,"offset":1437},"indent":[1,1,1]}},{"type":"code","lang":"shell","meta":"script","value":"npm init","position":{"start":{"line":33,"column":1,"offset":1441},"end":{"line":35,"column":4,"offset":1471},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Adding dependencies","position":{"start":{"line":37,"column":4,"offset":1478},"end":{"line":37,"column":23,"offset":1497},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1475},"end":{"line":37,"column":23,"offset":1497},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that we have an npm package, we can add our dependencies. Let's add both the \n","position":{"start":{"line":39,"column":1,"offset":1501},"end":{"line":40,"column":1,"offset":1584},"indent":[1]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/@kwikswap/v1-core","children":[{"type":"inlineCode","value":"@kwikswap/v1-core","position":{"start":{"line":40,"column":2,"offset":1585},"end":{"line":40,"column":21,"offset":1604},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1584},"end":{"line":40,"column":71,"offset":1654},"indent":[]}},{"type":"text","value":" and \n","position":{"start":{"line":40,"column":71,"offset":1654},"end":{"line":41,"column":1,"offset":1661},"indent":[1]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/@kwikswap/v1-periphery","children":[{"type":"inlineCode","value":"@kwikswap/v1-periphery","position":{"start":{"line":41,"column":2,"offset":1662},"end":{"line":41,"column":26,"offset":1686},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1661},"end":{"line":41,"column":81,"offset":1741},"indent":[]}},{"type":"text","value":" packages.","position":{"start":{"line":41,"column":81,"offset":1741},"end":{"line":41,"column":91,"offset":1751},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1501},"end":{"line":41,"column":91,"offset":1751},"indent":[1,1]}},{"type":"code","lang":"shell","meta":"script","value":"npm i --save @kwikswap/v1-core\nnpm i --save @kwikswap/v1-periphery","position":{"start":{"line":43,"column":1,"offset":1755},"end":{"line":46,"column":4,"offset":1844},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you check the ","position":{"start":{"line":48,"column":1,"offset":1848},"end":{"line":48,"column":18,"offset":1865},"indent":[]}},{"type":"inlineCode","value":"node_modules/@kwikswap","position":{"start":{"line":48,"column":18,"offset":1865},"end":{"line":48,"column":42,"offset":1889},"indent":[]}},{"type":"text","value":" directory, you can now find the Kwikswap contracts. ","position":{"start":{"line":48,"column":42,"offset":1889},"end":{"line":48,"column":95,"offset":1942},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1848},"end":{"line":48,"column":95,"offset":1942},"indent":[]}},{"type":"code","lang":"shell","meta":"script","value":"moody@MacBook-Pro ~/I/u/demo> ls node_modules/@kwikswap/v1-core/contracts\nKwikswapV1ERC20.sol    KwikswapV1Pair.sol     libraries/\nKwikswapV1Factory.sol  interfaces/           test/\nmoody@MacBook-Pro ~/I/u/demo> ls node_modules/@kwikswap/v1-periphery/contracts/\nKwikswapV1Migrator.sol  examples/              test/\nKwikswapV1Router01.sol  interfaces/\nKwikswapV1Router02.sol  libraries/","position":{"start":{"line":50,"column":1,"offset":1946},"end":{"line":58,"column":4,"offset":2359},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"These packages include both the smart contract source code and the build artifacts.","position":{"start":{"line":60,"column":1,"offset":2363},"end":{"line":60,"column":84,"offset":2446},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2363},"end":{"line":60,"column":84,"offset":2446},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Writing our contract","position":{"start":{"line":62,"column":4,"offset":2453},"end":{"line":62,"column":24,"offset":2473},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2450},"end":{"line":62,"column":24,"offset":2473},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can now get started writing our example contract. \nFor writing Solidity, we recommend IntelliJ or VSCode with a solidity plugin, but you can use any text editor.\nLet's write a contract that returns the value of some amount of liquidity shares for a given token pair. \nFirst create a couple of files:","position":{"start":{"line":64,"column":1,"offset":2477},"end":{"line":67,"column":32,"offset":2782},"indent":[1,1,1]}}],"position":{"start":{"line":64,"column":1,"offset":2477},"end":{"line":67,"column":32,"offset":2782},"indent":[1,1,1]}},{"type":"code","lang":"shell","meta":"script","value":"mkdir contracts/interfaces\ntouch contracts/interfaces/ILiquidityValueCalculator.sol\ntouch contracts/LiquidityValueCalculator.sol","position":{"start":{"line":69,"column":1,"offset":2786},"end":{"line":73,"column":5,"offset":2939},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This will be the interface of the contract we implement. Put it in ","position":{"start":{"line":75,"column":1,"offset":2943},"end":{"line":75,"column":68,"offset":3010},"indent":[]}},{"type":"inlineCode","value":"contracts/interfaces/ILiquidityValueCalculator.sol","position":{"start":{"line":75,"column":68,"offset":3010},"end":{"line":75,"column":120,"offset":3062},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":75,"column":120,"offset":3062},"end":{"line":75,"column":121,"offset":3063},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":2943},"end":{"line":75,"column":121,"offset":3063},"indent":[]}},{"type":"code","lang":"solidity","meta":null,"value":"pragma solidity ^0.6.6;\n\ninterface ILiquidityValueCalculator {\n    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external returns (uint tokenAAmount, uint tokenBAmount);\n}","position":{"start":{"line":77,"column":1,"offset":3067},"end":{"line":83,"column":4,"offset":3298},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now let's start with the constructor. You need to know where the ","position":{"start":{"line":85,"column":1,"offset":3302},"end":{"line":85,"column":66,"offset":3367},"indent":[]}},{"type":"inlineCode","value":"KwikswapV1Factory","position":{"start":{"line":85,"column":66,"offset":3367},"end":{"line":85,"column":85,"offset":3386},"indent":[]}},{"type":"text","value":" is deployed in order to compute the\naddress of the pair and look up the total supply of liquidity shares, plus the amounts for the reserves. \nWe can store this as an address passed to the constructor.","position":{"start":{"line":85,"column":85,"offset":3386},"end":{"line":87,"column":59,"offset":3589},"indent":[1,1]}}],"position":{"start":{"line":85,"column":1,"offset":3302},"end":{"line":87,"column":59,"offset":3589},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The factory address is constant on mainnet and all testnets, so it may be tempting to make this value a constant in your contract,\nbut since we need to unit test the contract it should be an argument. You can use solidity immutables to save on gas\nwhen accessing this variable.","position":{"start":{"line":89,"column":1,"offset":3593},"end":{"line":91,"column":30,"offset":3872},"indent":[1,1]}}],"position":{"start":{"line":89,"column":1,"offset":3593},"end":{"line":91,"column":30,"offset":3872},"indent":[1,1]}},{"type":"code","lang":"solidity","meta":null,"value":"pragma solidity ^0.6.6;\n\nimport './interfaces/ILiquidityValueCalculator.sol';\n\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\n    address public factory;\n    constructor(address factory_) public {\n        factory = factory_;\n    }\n}","position":{"start":{"line":93,"column":1,"offset":3876},"end":{"line":104,"column":4,"offset":4153},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now we need to be able to look up the total supply of liquidity for a pair, and its token balances. \nLet's put this in a separate function. To implement it, we must:","position":{"start":{"line":106,"column":1,"offset":4157},"end":{"line":107,"column":65,"offset":4323},"indent":[1]}}],"position":{"start":{"line":106,"column":1,"offset":4157},"end":{"line":107,"column":65,"offset":4323},"indent":[1]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Look up the pair address","position":{"start":{"line":109,"column":4,"offset":4330},"end":{"line":109,"column":28,"offset":4354},"indent":[]}}],"position":{"start":{"line":109,"column":4,"offset":4330},"end":{"line":109,"column":28,"offset":4354},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":4327},"end":{"line":109,"column":28,"offset":4354},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Get the reserves of the pair","position":{"start":{"line":110,"column":4,"offset":4359},"end":{"line":110,"column":32,"offset":4387},"indent":[]}}],"position":{"start":{"line":110,"column":4,"offset":4359},"end":{"line":110,"column":32,"offset":4387},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":4356},"end":{"line":110,"column":32,"offset":4387},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Get the total supply of the pair liquidity","position":{"start":{"line":111,"column":4,"offset":4392},"end":{"line":111,"column":46,"offset":4434},"indent":[]}}],"position":{"start":{"line":111,"column":4,"offset":4392},"end":{"line":111,"column":46,"offset":4434},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":4389},"end":{"line":111,"column":46,"offset":4434},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Sort the reserves in the order of tokenA, tokenB ","position":{"start":{"line":112,"column":4,"offset":4439},"end":{"line":112,"column":53,"offset":4488},"indent":[]}}],"position":{"start":{"line":112,"column":4,"offset":4439},"end":{"line":112,"column":53,"offset":4488},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":4436},"end":{"line":112,"column":53,"offset":4488},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":4327},"end":{"line":112,"column":53,"offset":4488},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":114,"column":1,"offset":4492},"end":{"line":114,"column":5,"offset":4496},"indent":[]}},{"type":"link","title":null,"url":"/docs/v1/smart-contracts/library/","children":[{"type":"inlineCode","value":"KwikswapV1Library","position":{"start":{"line":114,"column":6,"offset":4497},"end":{"line":114,"column":25,"offset":4516},"indent":[]}}],"position":{"start":{"line":114,"column":5,"offset":4496},"end":{"line":114,"column":61,"offset":4552},"indent":[]}},{"type":"text","value":" has some helpful methods for this.","position":{"start":{"line":114,"column":61,"offset":4552},"end":{"line":114,"column":96,"offset":4587},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4492},"end":{"line":114,"column":96,"offset":4587},"indent":[]}},{"type":"code","lang":"solidity","meta":null,"value":"pragma solidity ^0.6.6;\n\nimport './interfaces/ILiquidityValueCalculator.sol';\nimport '@kwikswap/v1-periphery/contracts/libraries/KwikswapV1Library.sol';\nimport '@kwikswap/v1-core/contracts/interfaces/IKwikswapV1Pair.sol';\n\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\n    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {\n        IKwikswapV1Pair pair = IKwikswapV1Pair(KwikswapV1Library.pairFor(factory, tokenA, tokenB));\n        totalSupply = pair.totalSupply();\n        (uint reserves0, uint reserves1,) = pair.getReserves();\n        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);\n    } \n}","position":{"start":{"line":116,"column":1,"offset":4591},"end":{"line":131,"column":4,"offset":5357},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Finally we just need to compute the share value. We will leave that as an exercise to the reader.","position":{"start":{"line":133,"column":1,"offset":5361},"end":{"line":133,"column":98,"offset":5458},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":5361},"end":{"line":133,"column":98,"offset":5458},"indent":[]}},{"type":"code","lang":"solidity","meta":null,"value":"pragma solidity ^0.6.6;\n\nimport './interfaces/ILiquidityValueCalculator.sol';\nimport '@kwikswap/v1-periphery/contracts/libraries/KwikswapV1Library.sol';\nimport '@kwikswap/v1-core/contracts/interfaces/IKwikswapV1Pair.sol';\n\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\n    address public factory;\n    constructor(address factory_) public {\n        factory = factory_;\n    }\n\n    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {\n        IKwikswapV1Pair pair = IKwikswapV1Pair(KwikswapV1Library.pairFor(factory, tokenA, tokenB));\n        totalSupply = pair.totalSupply();\n        (uint reserves0, uint reserves1,) = pair.getReserves();\n        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);\n    }\n \n    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external override returns (uint tokenAAmount, uint tokenBAmount) {\n        revert('TODO');\n    }\n}","position":{"start":{"line":135,"column":1,"offset":5462},"end":{"line":159,"column":5,"offset":6530},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Writing tests","position":{"start":{"line":161,"column":4,"offset":6537},"end":{"line":161,"column":17,"offset":6550},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":6534},"end":{"line":161,"column":17,"offset":6550},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In order to test your contract, you need to:","position":{"start":{"line":163,"column":1,"offset":6554},"end":{"line":163,"column":45,"offset":6598},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":6554},"end":{"line":163,"column":45,"offset":6598},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Bring up a testnet","position":{"start":{"line":165,"column":4,"offset":6605},"end":{"line":165,"column":22,"offset":6623},"indent":[]}}],"position":{"start":{"line":165,"column":4,"offset":6605},"end":{"line":165,"column":22,"offset":6623},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":6602},"end":{"line":165,"column":22,"offset":6623},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy the ","position":{"start":{"line":166,"column":4,"offset":6628},"end":{"line":166,"column":15,"offset":6639},"indent":[]}},{"type":"inlineCode","value":"KwikswapV1Factory","position":{"start":{"line":166,"column":15,"offset":6639},"end":{"line":166,"column":34,"offset":6658},"indent":[]}}],"position":{"start":{"line":166,"column":4,"offset":6628},"end":{"line":166,"column":34,"offset":6658},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":6625},"end":{"line":166,"column":34,"offset":6658},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy at least 2 ERC20 tokens for a pair","position":{"start":{"line":167,"column":4,"offset":6663},"end":{"line":167,"column":45,"offset":6704},"indent":[]}}],"position":{"start":{"line":167,"column":4,"offset":6663},"end":{"line":167,"column":45,"offset":6704},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":6660},"end":{"line":167,"column":45,"offset":6704},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a pair for the factory","position":{"start":{"line":168,"column":4,"offset":6709},"end":{"line":168,"column":33,"offset":6738},"indent":[]}}],"position":{"start":{"line":168,"column":4,"offset":6709},"end":{"line":168,"column":33,"offset":6738},"indent":[]}}],"position":{"start":{"line":168,"column":1,"offset":6706},"end":{"line":168,"column":33,"offset":6738},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy your ","position":{"start":{"line":169,"column":4,"offset":6743},"end":{"line":169,"column":16,"offset":6755},"indent":[]}},{"type":"inlineCode","value":"LiquidityValueCalculator","position":{"start":{"line":169,"column":16,"offset":6755},"end":{"line":169,"column":42,"offset":6781},"indent":[]}},{"type":"text","value":" contract","position":{"start":{"line":169,"column":42,"offset":6781},"end":{"line":169,"column":51,"offset":6790},"indent":[]}}],"position":{"start":{"line":169,"column":4,"offset":6743},"end":{"line":169,"column":51,"offset":6790},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":6740},"end":{"line":169,"column":51,"offset":6790},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Call ","position":{"start":{"line":170,"column":4,"offset":6795},"end":{"line":170,"column":9,"offset":6800},"indent":[]}},{"type":"inlineCode","value":"LiquidityValueCalculator#computeLiquidityShareValue","position":{"start":{"line":170,"column":9,"offset":6800},"end":{"line":170,"column":62,"offset":6853},"indent":[]}}],"position":{"start":{"line":170,"column":4,"offset":6795},"end":{"line":170,"column":62,"offset":6853},"indent":[]}}],"position":{"start":{"line":170,"column":1,"offset":6792},"end":{"line":170,"column":62,"offset":6853},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Verify the result with an assertion","position":{"start":{"line":171,"column":4,"offset":6858},"end":{"line":171,"column":39,"offset":6893},"indent":[]}}],"position":{"start":{"line":171,"column":4,"offset":6858},"end":{"line":171,"column":39,"offset":6893},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":6855},"end":{"line":171,"column":39,"offset":6893},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":6602},"end":{"line":171,"column":39,"offset":6893},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"#","position":{"start":{"line":173,"column":1,"offset":6897},"end":{"line":173,"column":3,"offset":6899},"indent":[]}},{"type":"text","value":"1 is handled for you automatically by the ","position":{"start":{"line":173,"column":3,"offset":6899},"end":{"line":173,"column":45,"offset":6941},"indent":[]}},{"type":"inlineCode","value":"truffle test","position":{"start":{"line":173,"column":45,"offset":6941},"end":{"line":173,"column":59,"offset":6955},"indent":[]}},{"type":"text","value":" command.","position":{"start":{"line":173,"column":59,"offset":6955},"end":{"line":173,"column":68,"offset":6964},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":6897},"end":{"line":173,"column":68,"offset":6964},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note you should only deploy the precompiled Kwikswap contracts in the ","position":{"start":{"line":175,"column":1,"offset":6968},"end":{"line":175,"column":71,"offset":7038},"indent":[]}},{"type":"inlineCode","value":"build","position":{"start":{"line":175,"column":71,"offset":7038},"end":{"line":175,"column":78,"offset":7045},"indent":[]}},{"type":"text","value":" directories for unit tests. \nThis is because solidity appends a metadata hash to compiled contract artifacts which includes the hash of the contract\nsource code path, and compilations on other machines will not result in the exact same bytecode.\nThis is problematic because in Kwikswap we use the hash of the bytecode in the v1-periphery\n","position":{"start":{"line":175,"column":78,"offset":7045},"end":{"line":179,"column":1,"offset":7388},"indent":[1,1,1,1]}},{"type":"link","title":null,"url":"https://github.com/Kwikswap/Kwikswap-V1-Periphery/blob/master/contracts/libraries/KwikswapV1Library.sol#L24","children":[{"type":"inlineCode","value":"KwikswapV1Library","position":{"start":{"line":179,"column":2,"offset":7389},"end":{"line":179,"column":21,"offset":7408},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":7388},"end":{"line":179,"column":131,"offset":7518},"indent":[]}},{"type":"text","value":",\nto compute the pair address.","position":{"start":{"line":179,"column":131,"offset":7518},"end":{"line":180,"column":29,"offset":7549},"indent":[1]}}],"position":{"start":{"line":175,"column":1,"offset":6968},"end":{"line":180,"column":29,"offset":7549},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To get the bytecode for deploying KwikswapV1Factory, you can import the file via:","position":{"start":{"line":182,"column":1,"offset":7553},"end":{"line":182,"column":82,"offset":7634},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":7553},"end":{"line":182,"column":82,"offset":7634},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const KwikswapV1FactoryBytecode = require('@kwikswap/v1-core/build/KwikswapV1Factory.json').bytecode","position":{"start":{"line":184,"column":1,"offset":7638},"end":{"line":186,"column":4,"offset":7758},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We recommend using a standard ERC20 from ","position":{"start":{"line":188,"column":1,"offset":7762},"end":{"line":188,"column":42,"offset":7803},"indent":[]}},{"type":"inlineCode","value":"@openzeppelin/contracts","position":{"start":{"line":188,"column":42,"offset":7803},"end":{"line":188,"column":67,"offset":7828},"indent":[]}},{"type":"text","value":" for deploying an ERC20.","position":{"start":{"line":188,"column":67,"offset":7828},"end":{"line":188,"column":91,"offset":7852},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":7762},"end":{"line":188,"column":91,"offset":7852},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can read more about deploying contracts and writing tests using Truffle \n","position":{"start":{"line":190,"column":1,"offset":7856},"end":{"line":191,"column":1,"offset":7934},"indent":[1]}},{"type":"link","title":null,"url":"https://www.trufflesuite.com/docs/truffle/testing/writing-tests-in-javascript","children":[{"type":"text","value":"here","position":{"start":{"line":191,"column":2,"offset":7935},"end":{"line":191,"column":6,"offset":7939},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":7934},"end":{"line":191,"column":86,"offset":8019},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":191,"column":86,"offset":8019},"end":{"line":191,"column":87,"offset":8020},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":7856},"end":{"line":191,"column":87,"offset":8020},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Compiling and deploying the contract","position":{"start":{"line":193,"column":4,"offset":8027},"end":{"line":193,"column":40,"offset":8063},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":8024},"end":{"line":193,"column":40,"offset":8063},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Learn more about compiling and deploying contracts using Truffle \n","position":{"start":{"line":195,"column":1,"offset":8067},"end":{"line":196,"column":1,"offset":8134},"indent":[1]}},{"type":"link","title":null,"url":"https://www.trufflesuite.com/docs/truffle/getting-started/compiling-contracts","children":[{"type":"text","value":"here","position":{"start":{"line":196,"column":2,"offset":8135},"end":{"line":196,"column":6,"offset":8139},"indent":[]}}],"position":{"start":{"line":196,"column":1,"offset":8134},"end":{"line":196,"column":86,"offset":8219},"indent":[]}},{"type":"text","value":" and\n","position":{"start":{"line":196,"column":86,"offset":8219},"end":{"line":197,"column":1,"offset":8225},"indent":[1]}},{"type":"link","title":null,"url":"https://www.trufflesuite.com/docs/truffle/getting-started/running-migrations","children":[{"type":"text","value":"here","position":{"start":{"line":197,"column":2,"offset":8226},"end":{"line":197,"column":6,"offset":8230},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":8225},"end":{"line":197,"column":85,"offset":8309},"indent":[]}},{"type":"text","value":" respectively.","position":{"start":{"line":197,"column":85,"offset":8309},"end":{"line":197,"column":99,"offset":8323},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":8067},"end":{"line":197,"column":99,"offset":8323},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"WIP","position":{"start":{"line":199,"column":4,"offset":8330},"end":{"line":199,"column":7,"offset":8333},"indent":[]}}],"position":{"start":{"line":199,"column":1,"offset":8327},"end":{"line":199,"column":7,"offset":8333},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This guide is a WIP. Please contribute to this guide with the edit button below!","position":{"start":{"line":201,"column":1,"offset":8337},"end":{"line":201,"column":81,"offset":8417},"indent":[]}}],"position":{"start":{"line":201,"column":1,"offset":8337},"end":{"line":201,"column":81,"offset":8417},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Smart Contract Quick start\",\"tags\":\"smart contract integration, documentation, quick start\"}","position":{"start":{"line":204,"column":1,"offset":8421},"end":{"line":204,"column":131,"offset":8551},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":204,"column":131,"offset":8551}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Smart Contract Quick start\",\n  \"tags\": \"smart contract integration, documentation, quick start\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Developing smart contracts for Ethereum involves a bevy of off-chain tools used for producing and testing bytecode\\nthat runs on the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://eth.wiki/en/concepts/evm/ethereum-virtual-machine-(evm)-awesome-list\"\n  }, \"Ethereum Virtual Machine (EVM)\"), \".\\nSome tools also include workflows for deploying this bytecode to the Ethereum network and testnets.\\nThere are many options for these tools. This guide walks you through writing and testing a simple smart contract that\\ninteracts with the Kwikswap Protocol using one specific set of tools (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"truffle\"), \" + \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm\"), \" + \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mocha\"), \").\"), mdx(\"h2\", {\n    \"id\": \"requirements\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#requirements\",\n    \"aria-label\": \"requirements permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Requirements\"), mdx(\"p\", null, \"To follow this guide, you must have the following installed:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://nodejs.org/en/\"\n  }, \"nodejs >= v12.x & npm >= 6.x\"))), mdx(\"h2\", {\n    \"id\": \"bootstrapping-a-project\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#bootstrapping-a-project\",\n    \"aria-label\": \"bootstrapping a project permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Bootstrapping a project\"), mdx(\"p\", null, \"You can start from scratch, but it\\u2019s easier to use a tool like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"truffle\"), \" to bootstrap an empty project.\\nCreate an empty directory and run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npx truffle init\"), \" inside that directory to unbox the default\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.trufflesuite.com/boxes\"\n  }, \"Truffle box\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"mkdir demo\\ncd demo\\nnpx truffle init\\n\")), mdx(\"h2\", {\n    \"id\": \"setting-up-npm\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#setting-up-npm\",\n    \"aria-label\": \"setting up npm permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Setting up npm\"), mdx(\"p\", null, \"In order to reference the Kwikswap contracts, you should use the npm artifacts we deploy containing the core and\\nperiphery smart contracts and interfaces. To add npm dependencies, we first initialize the npm package.\\nWe can run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm init\"), \" in the same directory to create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file. You can accept all the defaults and\\nchange it later.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"npm init\\n\")), mdx(\"h2\", {\n    \"id\": \"adding-dependencies\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#adding-dependencies\",\n    \"aria-label\": \"adding dependencies permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Adding dependencies\"), mdx(\"p\", null, \"Now that we have an npm package, we can add our dependencies. Let\\u2019s add both the\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/@kwikswap/v1-core\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"@kwikswap/v1-core\")), \" and\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/@kwikswap/v1-periphery\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"@kwikswap/v1-periphery\")), \" packages.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"npm i --save @kwikswap/v1-core\\nnpm i --save @kwikswap/v1-periphery\\n\")), mdx(\"p\", null, \"If you check the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules/@kwikswap\"), \" directory, you can now find the Kwikswap contracts. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"moody@MacBook-Pro ~/I/u/demo> ls node_modules/@kwikswap/v1-core/contracts\\nKwikswapV1ERC20.sol    KwikswapV1Pair.sol     libraries/\\nKwikswapV1Factory.sol  interfaces/           test/\\nmoody@MacBook-Pro ~/I/u/demo> ls node_modules/@kwikswap/v1-periphery/contracts/\\nKwikswapV1Migrator.sol  examples/              test/\\nKwikswapV1Router01.sol  interfaces/\\nKwikswapV1Router02.sol  libraries/\\n\")), mdx(\"p\", null, \"These packages include both the smart contract source code and the build artifacts.\"), mdx(\"h2\", {\n    \"id\": \"writing-our-contract\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#writing-our-contract\",\n    \"aria-label\": \"writing our contract permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Writing our contract\"), mdx(\"p\", null, \"We can now get started writing our example contract.\\nFor writing Solidity, we recommend IntelliJ or VSCode with a solidity plugin, but you can use any text editor.\\nLet\\u2019s write a contract that returns the value of some amount of liquidity shares for a given token pair.\\nFirst create a couple of files:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\",\n    \"metastring\": \"script\",\n    \"script\": true\n  }, \"mkdir contracts/interfaces\\ntouch contracts/interfaces/ILiquidityValueCalculator.sol\\ntouch contracts/LiquidityValueCalculator.sol\\n\")), mdx(\"p\", null, \"This will be the interface of the contract we implement. Put it in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"contracts/interfaces/ILiquidityValueCalculator.sol\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-solidity\"\n  }, \"pragma solidity ^0.6.6;\\n\\ninterface ILiquidityValueCalculator {\\n    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external returns (uint tokenAAmount, uint tokenBAmount);\\n}\\n\")), mdx(\"p\", null, \"Now let\\u2019s start with the constructor. You need to know where the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"KwikswapV1Factory\"), \" is deployed in order to compute the\\naddress of the pair and look up the total supply of liquidity shares, plus the amounts for the reserves.\\nWe can store this as an address passed to the constructor.\"), mdx(\"p\", null, \"The factory address is constant on mainnet and all testnets, so it may be tempting to make this value a constant in your contract,\\nbut since we need to unit test the contract it should be an argument. You can use solidity immutables to save on gas\\nwhen accessing this variable.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-solidity\"\n  }, \"pragma solidity ^0.6.6;\\n\\nimport './interfaces/ILiquidityValueCalculator.sol';\\n\\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\\n    address public factory;\\n    constructor(address factory_) public {\\n        factory = factory_;\\n    }\\n}\\n\")), mdx(\"p\", null, \"Now we need to be able to look up the total supply of liquidity for a pair, and its token balances.\\nLet\\u2019s put this in a separate function. To implement it, we must:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Look up the pair address\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Get the reserves of the pair\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Get the total supply of the pair liquidity\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Sort the reserves in the order of tokenA, tokenB \")), mdx(\"p\", null, \"The \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/docs/v1/smart-contracts/library/\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"KwikswapV1Library\")), \" has some helpful methods for this.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-solidity\"\n  }, \"pragma solidity ^0.6.6;\\n\\nimport './interfaces/ILiquidityValueCalculator.sol';\\nimport '@kwikswap/v1-periphery/contracts/libraries/KwikswapV1Library.sol';\\nimport '@kwikswap/v1-core/contracts/interfaces/IKwikswapV1Pair.sol';\\n\\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\\n    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {\\n        IKwikswapV1Pair pair = IKwikswapV1Pair(KwikswapV1Library.pairFor(factory, tokenA, tokenB));\\n        totalSupply = pair.totalSupply();\\n        (uint reserves0, uint reserves1,) = pair.getReserves();\\n        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);\\n    } \\n}\\n\")), mdx(\"p\", null, \"Finally we just need to compute the share value. We will leave that as an exercise to the reader.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-solidity\"\n  }, \"pragma solidity ^0.6.6;\\n\\nimport './interfaces/ILiquidityValueCalculator.sol';\\nimport '@kwikswap/v1-periphery/contracts/libraries/KwikswapV1Library.sol';\\nimport '@kwikswap/v1-core/contracts/interfaces/IKwikswapV1Pair.sol';\\n\\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\\n    address public factory;\\n    constructor(address factory_) public {\\n        factory = factory_;\\n    }\\n\\n    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {\\n        IKwikswapV1Pair pair = IKwikswapV1Pair(KwikswapV1Library.pairFor(factory, tokenA, tokenB));\\n        totalSupply = pair.totalSupply();\\n        (uint reserves0, uint reserves1,) = pair.getReserves();\\n        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);\\n    }\\n \\n    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external override returns (uint tokenAAmount, uint tokenBAmount) {\\n        revert('TODO');\\n    }\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"writing-tests\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#writing-tests\",\n    \"aria-label\": \"writing tests permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Writing tests\"), mdx(\"p\", null, \"In order to test your contract, you need to:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Bring up a testnet\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Deploy the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"KwikswapV1Factory\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Deploy at least 2 ERC20 tokens for a pair\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a pair for the factory\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Deploy your \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"LiquidityValueCalculator\"), \" contract\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Call \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"LiquidityValueCalculator#computeLiquidityShareValue\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Verify the result with an assertion\")), mdx(\"p\", null, \"#\", \"1 is handled for you automatically by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"truffle test\"), \" command.\"), mdx(\"p\", null, \"Note you should only deploy the precompiled Kwikswap contracts in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build\"), \" directories for unit tests.\\nThis is because solidity appends a metadata hash to compiled contract artifacts which includes the hash of the contract\\nsource code path, and compilations on other machines will not result in the exact same bytecode.\\nThis is problematic because in Kwikswap we use the hash of the bytecode in the v1-periphery\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/Kwikswap/Kwikswap-V1-Periphery/blob/master/contracts/libraries/KwikswapV1Library.sol#L24\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"KwikswapV1Library\")), \",\\nto compute the pair address.\"), mdx(\"p\", null, \"To get the bytecode for deploying KwikswapV1Factory, you can import the file via:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"const KwikswapV1FactoryBytecode = require('@kwikswap/v1-core/build/KwikswapV1Factory.json').bytecode\\n\")), mdx(\"p\", null, \"We recommend using a standard ERC20 from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@openzeppelin/contracts\"), \" for deploying an ERC20.\"), mdx(\"p\", null, \"You can read more about deploying contracts and writing tests using Truffle\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.trufflesuite.com/docs/truffle/testing/writing-tests-in-javascript\"\n  }, \"here\"), \".\"), mdx(\"h2\", {\n    \"id\": \"compiling-and-deploying-the-contract\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#compiling-and-deploying-the-contract\",\n    \"aria-label\": \"compiling and deploying the contract permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Compiling and deploying the contract\"), mdx(\"p\", null, \"Learn more about compiling and deploying contracts using Truffle\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.trufflesuite.com/docs/truffle/getting-started/compiling-contracts\"\n  }, \"here\"), \" and\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.trufflesuite.com/docs/truffle/getting-started/running-migrations\"\n  }, \"here\"), \" respectively.\"), mdx(\"h2\", {\n    \"id\": \"wip\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#wip\",\n    \"aria-label\": \"wip permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"WIP\"), mdx(\"p\", null, \"This guide is a WIP. Please contribute to this guide with the edit button below!\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Smart Contract Quick start\",\n  \"tags\": \"smart contract integration, documentation, quick start\"\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Developing smart contracts for Ethereum involves a bevy of off-chain tools used for producing and testing bytecode\nthat runs on the `}<a parentName=\"p\" {...{\n        \"href\": \"https://eth.wiki/en/concepts/evm/ethereum-virtual-machine-(evm)-awesome-list\"\n      }}>{`Ethereum Virtual Machine (EVM)`}</a>{`.\nSome tools also include workflows for deploying this bytecode to the Ethereum network and testnets.\nThere are many options for these tools. This guide walks you through writing and testing a simple smart contract that\ninteracts with the Kwikswap Protocol using one specific set of tools (`}<inlineCode parentName=\"p\">{`truffle`}</inlineCode>{` + `}<inlineCode parentName=\"p\">{`npm`}</inlineCode>{` + `}<inlineCode parentName=\"p\">{`mocha`}</inlineCode>{`).`}</p>\n    <h2 {...{\n      \"id\": \"requirements\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#requirements\",\n        \"aria-label\": \"requirements permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Requirements`}</h2>\n    <p>{`To follow this guide, you must have the following installed:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://nodejs.org/en/\"\n        }}>{`nodejs >= v12.x & npm >= 6.x`}</a></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"bootstrapping-a-project\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#bootstrapping-a-project\",\n        \"aria-label\": \"bootstrapping a project permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Bootstrapping a project`}</h2>\n    <p>{`You can start from scratch, but its easier to use a tool like `}<inlineCode parentName=\"p\">{`truffle`}</inlineCode>{` to bootstrap an empty project.\nCreate an empty directory and run `}<inlineCode parentName=\"p\">{`npx truffle init`}</inlineCode>{` inside that directory to unbox the default\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.trufflesuite.com/boxes\"\n      }}>{`Truffle box`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\",\n        \"metastring\": \"script\",\n        \"script\": true\n      }}>{`mkdir demo\ncd demo\nnpx truffle init\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"setting-up-npm\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#setting-up-npm\",\n        \"aria-label\": \"setting up npm permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Setting up npm`}</h2>\n    <p>{`In order to reference the Kwikswap contracts, you should use the npm artifacts we deploy containing the core and\nperiphery smart contracts and interfaces. To add npm dependencies, we first initialize the npm package.\nWe can run `}<inlineCode parentName=\"p\">{`npm init`}</inlineCode>{` in the same directory to create a `}<inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` file. You can accept all the defaults and\nchange it later.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\",\n        \"metastring\": \"script\",\n        \"script\": true\n      }}>{`npm init\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"adding-dependencies\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#adding-dependencies\",\n        \"aria-label\": \"adding dependencies permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Adding dependencies`}</h2>\n    <p>{`Now that we have an npm package, we can add our dependencies. Lets add both the\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/@kwikswap/v1-core\"\n      }}><inlineCode parentName=\"a\">{`@kwikswap/v1-core`}</inlineCode></a>{` and\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/@kwikswap/v1-periphery\"\n      }}><inlineCode parentName=\"a\">{`@kwikswap/v1-periphery`}</inlineCode></a>{` packages.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\",\n        \"metastring\": \"script\",\n        \"script\": true\n      }}>{`npm i --save @kwikswap/v1-core\nnpm i --save @kwikswap/v1-periphery\n`}</code></pre>\n    <p>{`If you check the `}<inlineCode parentName=\"p\">{`node_modules/@kwikswap`}</inlineCode>{` directory, you can now find the Kwikswap contracts. `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\",\n        \"metastring\": \"script\",\n        \"script\": true\n      }}>{`moody@MacBook-Pro ~/I/u/demo> ls node_modules/@kwikswap/v1-core/contracts\nKwikswapV1ERC20.sol    KwikswapV1Pair.sol     libraries/\nKwikswapV1Factory.sol  interfaces/           test/\nmoody@MacBook-Pro ~/I/u/demo> ls node_modules/@kwikswap/v1-periphery/contracts/\nKwikswapV1Migrator.sol  examples/              test/\nKwikswapV1Router01.sol  interfaces/\nKwikswapV1Router02.sol  libraries/\n`}</code></pre>\n    <p>{`These packages include both the smart contract source code and the build artifacts.`}</p>\n    <h2 {...{\n      \"id\": \"writing-our-contract\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#writing-our-contract\",\n        \"aria-label\": \"writing our contract permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Writing our contract`}</h2>\n    <p>{`We can now get started writing our example contract.\nFor writing Solidity, we recommend IntelliJ or VSCode with a solidity plugin, but you can use any text editor.\nLets write a contract that returns the value of some amount of liquidity shares for a given token pair.\nFirst create a couple of files:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\",\n        \"metastring\": \"script\",\n        \"script\": true\n      }}>{`mkdir contracts/interfaces\ntouch contracts/interfaces/ILiquidityValueCalculator.sol\ntouch contracts/LiquidityValueCalculator.sol\n`}</code></pre>\n    <p>{`This will be the interface of the contract we implement. Put it in `}<inlineCode parentName=\"p\">{`contracts/interfaces/ILiquidityValueCalculator.sol`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-solidity\"\n      }}>{`pragma solidity ^0.6.6;\n\ninterface ILiquidityValueCalculator {\n    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external returns (uint tokenAAmount, uint tokenBAmount);\n}\n`}</code></pre>\n    <p>{`Now lets start with the constructor. You need to know where the `}<inlineCode parentName=\"p\">{`KwikswapV1Factory`}</inlineCode>{` is deployed in order to compute the\naddress of the pair and look up the total supply of liquidity shares, plus the amounts for the reserves.\nWe can store this as an address passed to the constructor.`}</p>\n    <p>{`The factory address is constant on mainnet and all testnets, so it may be tempting to make this value a constant in your contract,\nbut since we need to unit test the contract it should be an argument. You can use solidity immutables to save on gas\nwhen accessing this variable.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-solidity\"\n      }}>{`pragma solidity ^0.6.6;\n\nimport './interfaces/ILiquidityValueCalculator.sol';\n\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\n    address public factory;\n    constructor(address factory_) public {\n        factory = factory_;\n    }\n}\n`}</code></pre>\n    <p>{`Now we need to be able to look up the total supply of liquidity for a pair, and its token balances.\nLets put this in a separate function. To implement it, we must:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Look up the pair address`}</li>\n      <li parentName=\"ol\">{`Get the reserves of the pair`}</li>\n      <li parentName=\"ol\">{`Get the total supply of the pair liquidity`}</li>\n      <li parentName=\"ol\">{`Sort the reserves in the order of tokenA, tokenB `}</li>\n    </ol>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/v1/smart-contracts/library/\"\n      }}><inlineCode parentName=\"a\">{`KwikswapV1Library`}</inlineCode></a>{` has some helpful methods for this.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-solidity\"\n      }}>{`pragma solidity ^0.6.6;\n\nimport './interfaces/ILiquidityValueCalculator.sol';\nimport '@kwikswap/v1-periphery/contracts/libraries/KwikswapV1Library.sol';\nimport '@kwikswap/v1-core/contracts/interfaces/IKwikswapV1Pair.sol';\n\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\n    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {\n        IKwikswapV1Pair pair = IKwikswapV1Pair(KwikswapV1Library.pairFor(factory, tokenA, tokenB));\n        totalSupply = pair.totalSupply();\n        (uint reserves0, uint reserves1,) = pair.getReserves();\n        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);\n    } \n}\n`}</code></pre>\n    <p>{`Finally we just need to compute the share value. We will leave that as an exercise to the reader.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-solidity\"\n      }}>{`pragma solidity ^0.6.6;\n\nimport './interfaces/ILiquidityValueCalculator.sol';\nimport '@kwikswap/v1-periphery/contracts/libraries/KwikswapV1Library.sol';\nimport '@kwikswap/v1-core/contracts/interfaces/IKwikswapV1Pair.sol';\n\ncontract LiquidityValueCalculator is ILiquidityValueCalculator {\n    address public factory;\n    constructor(address factory_) public {\n        factory = factory_;\n    }\n\n    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {\n        IKwikswapV1Pair pair = IKwikswapV1Pair(KwikswapV1Library.pairFor(factory, tokenA, tokenB));\n        totalSupply = pair.totalSupply();\n        (uint reserves0, uint reserves1,) = pair.getReserves();\n        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);\n    }\n \n    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external override returns (uint tokenAAmount, uint tokenBAmount) {\n        revert('TODO');\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"writing-tests\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#writing-tests\",\n        \"aria-label\": \"writing tests permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Writing tests`}</h2>\n    <p>{`In order to test your contract, you need to:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Bring up a testnet`}</li>\n      <li parentName=\"ol\">{`Deploy the `}<inlineCode parentName=\"li\">{`KwikswapV1Factory`}</inlineCode></li>\n      <li parentName=\"ol\">{`Deploy at least 2 ERC20 tokens for a pair`}</li>\n      <li parentName=\"ol\">{`Create a pair for the factory`}</li>\n      <li parentName=\"ol\">{`Deploy your `}<inlineCode parentName=\"li\">{`LiquidityValueCalculator`}</inlineCode>{` contract`}</li>\n      <li parentName=\"ol\">{`Call `}<inlineCode parentName=\"li\">{`LiquidityValueCalculator#computeLiquidityShareValue`}</inlineCode></li>\n      <li parentName=\"ol\">{`Verify the result with an assertion`}</li>\n    </ol>\n    <p>{`#`}{`1 is handled for you automatically by the `}<inlineCode parentName=\"p\">{`truffle test`}</inlineCode>{` command.`}</p>\n    <p>{`Note you should only deploy the precompiled Kwikswap contracts in the `}<inlineCode parentName=\"p\">{`build`}</inlineCode>{` directories for unit tests.\nThis is because solidity appends a metadata hash to compiled contract artifacts which includes the hash of the contract\nsource code path, and compilations on other machines will not result in the exact same bytecode.\nThis is problematic because in Kwikswap we use the hash of the bytecode in the v1-periphery\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/Kwikswap/Kwikswap-V1-Periphery/blob/master/contracts/libraries/KwikswapV1Library.sol#L24\"\n      }}><inlineCode parentName=\"a\">{`KwikswapV1Library`}</inlineCode></a>{`,\nto compute the pair address.`}</p>\n    <p>{`To get the bytecode for deploying KwikswapV1Factory, you can import the file via:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const KwikswapV1FactoryBytecode = require('@kwikswap/v1-core/build/KwikswapV1Factory.json').bytecode\n`}</code></pre>\n    <p>{`We recommend using a standard ERC20 from `}<inlineCode parentName=\"p\">{`@openzeppelin/contracts`}</inlineCode>{` for deploying an ERC20.`}</p>\n    <p>{`You can read more about deploying contracts and writing tests using Truffle\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.trufflesuite.com/docs/truffle/testing/writing-tests-in-javascript\"\n      }}>{`here`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"compiling-and-deploying-the-contract\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#compiling-and-deploying-the-contract\",\n        \"aria-label\": \"compiling and deploying the contract permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Compiling and deploying the contract`}</h2>\n    <p>{`Learn more about compiling and deploying contracts using Truffle\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.trufflesuite.com/docs/truffle/getting-started/compiling-contracts\"\n      }}>{`here`}</a>{` and\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.trufflesuite.com/docs/truffle/getting-started/running-migrations\"\n      }}>{`here`}</a>{` respectively.`}</p>\n    <h2 {...{\n      \"id\": \"wip\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#wip\",\n        \"aria-label\": \"wip permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`WIP`}</h2>\n    <p>{`This guide is a WIP. Please contribute to this guide with the edit button below!`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}