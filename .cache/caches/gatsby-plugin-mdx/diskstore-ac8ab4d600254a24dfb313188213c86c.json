{"expireTime":9007200872306492000,"key":"gatsby-plugin-mdx-entire-payload-c608ab3597ed2992de01d8e00f4ee94c-","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Kwikswap incentivizes users to add liquidity to pools by rewarding providers with fees on trades. Market making, in general, is a complex activity which has the risk of losing money (compared to just ","position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":201,"offset":202},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"hodling","position":{"start":{"line":2,"column":203,"offset":204},"end":{"line":2,"column":210,"offset":211},"indent":[]}}],"position":{"start":{"line":2,"column":201,"offset":202},"end":{"line":2,"column":212,"offset":213},"indent":[]}},{"type":"text","value":") in the case of big directional moves of the underlying asset price.","position":{"start":{"line":2,"column":212,"offset":213},"end":{"line":2,"column":281,"offset":282},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":281,"offset":282},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Example from the article","position":{"start":{"line":5,"column":3,"offset":290},"end":{"line":5,"column":27,"offset":314},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":288},"end":{"line":5,"column":27,"offset":314},"indent":[]}},{"type":"jsx","value":"<blockquote>","position":{"start":{"line":7,"column":1,"offset":318},"end":{"line":7,"column":13,"offset":330},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Consider the case where a liquidity provider adds 10,000 DAI and 100 WETH to a pool (for a total value of ","position":{"start":{"line":9,"column":1,"offset":334},"end":{"line":9,"column":107,"offset":440},"indent":[]}},{"type":"text","value":"$","position":{"start":{"line":9,"column":107,"offset":440},"end":{"line":9,"column":109,"offset":442},"indent":[]}},{"type":"text","value":"20,000), the liquidity pool is now 100,000 DAI and 1,000 ETH in total. Because the amount supplied is equal to 10% of the total liquidity, the contract mints and sends the market maker “liquidity tokens” which entitle them to 10% of the liquidity available in the pool. These are not speculative tokens to be traded. They are merely an accounting or bookkeeping tool to keep track of how much the liquidity providers are owed. If others subsequently add/withdraw coins, new liquidity tokens are minted/burned such that everyone’s relative percentage share of the liquidity pool remains the same.","position":{"start":{"line":9,"column":109,"offset":442},"end":{"line":9,"column":704,"offset":1037},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":334},"end":{"line":9,"column":704,"offset":1037},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Now let’s assume the price trades on Coinbase from $100 to $150. The Kwikswap contract should reflect this change as well after some arbitrage. Traders will add DAI and remove ETH until the new ratio is now 150:1.","position":{"start":{"line":11,"column":3,"offset":1043},"end":{"line":11,"column":216,"offset":1256},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1041},"end":{"line":11,"column":218,"offset":1258},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1041},"end":{"line":11,"column":218,"offset":1258},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"What happens to the liquidity provider? The contract reflects something closer to 122,400 DAI and 817 ETH (to check these numbers are accurate, 122,400 ","position":{"start":{"line":13,"column":1,"offset":1262},"end":{"line":13,"column":153,"offset":1414},"indent":[]}},{"type":"text","value":"*","position":{"start":{"line":13,"column":153,"offset":1414},"end":{"line":13,"column":155,"offset":1416},"indent":[]}},{"type":"text","value":" 817 = 100,000,000 (our constant product) and 122,400 / 817 = 150, our new price). Withdrawing the 10% that we are entitled to would now yield 12,240 DAI and 81.7 ETH. The total market value here is $24,500. Roughly $500 worth of profit was missed out on as a result of the market making.","position":{"start":{"line":13,"column":155,"offset":1416},"end":{"line":13,"column":443,"offset":1704},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":1262},"end":{"line":13,"column":443,"offset":1704},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Obviously no one wants to provide liquidity out of charitable means, and the revenue isn’t dependent on the ability to flip out of good trades (there is no flipping). Instead, 0.3% of all trade volume is distributed proportionally to all liquidity providers. By default, these fees are put back into the liquidity pool, but can be collected any time. It’s difficult to know what the trade-off is between revenues from fees and losses from directional movements without knowing the amount of in-between trades. The more chop and back and forth, the better.","position":{"start":{"line":15,"column":3,"offset":1710},"end":{"line":15,"column":558,"offset":2265},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1708},"end":{"line":15,"column":560,"offset":2267},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1708},"end":{"line":15,"column":560,"offset":2267},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Why is my liquidity worth less than I put in?","position":{"start":{"line":17,"column":4,"offset":2274},"end":{"line":17,"column":49,"offset":2319},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":2271},"end":{"line":17,"column":49,"offset":2319},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To understand why the value of a liquidity provider’s stake can go down despite income from fees, we need to look a bit more closely at the formula used by Kwikswap to govern trading. The formula really is very simple. If we neglect trading fees, we have the following:","position":{"start":{"line":19,"column":1,"offset":2323},"end":{"line":19,"column":270,"offset":2592},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":2323},"end":{"line":19,"column":270,"offset":2592},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"eth_liquidity_pool * token_liquidity_pool = constant_product","position":{"start":{"line":21,"column":3,"offset":2598},"end":{"line":21,"column":65,"offset":2660},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":2598},"end":{"line":21,"column":65,"offset":2660},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":2596},"end":{"line":21,"column":65,"offset":2660},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":2596},"end":{"line":21,"column":65,"offset":2660},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In other words, the number of tokens a trader receives for their ETH and vice versa is calculated such that after the trade, the product of the two liquidity pools is the same as it was before the trade. The consequence of this formula is that for trades which are very small in value compared to the size of the liquidity pool we have:","position":{"start":{"line":23,"column":1,"offset":2664},"end":{"line":23,"column":337,"offset":3000},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":2664},"end":{"line":23,"column":337,"offset":3000},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"eth_price = token_liquidity_pool / eth_liquidity_pool","position":{"start":{"line":25,"column":3,"offset":3006},"end":{"line":25,"column":58,"offset":3061},"indent":[]}}],"position":{"start":{"line":25,"column":3,"offset":3006},"end":{"line":25,"column":58,"offset":3061},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":3004},"end":{"line":25,"column":58,"offset":3061},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":3004},"end":{"line":25,"column":58,"offset":3061},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Combining these two equations, we can work out the size of each liquidity pool at any given price, assuming constant total liquidity:","position":{"start":{"line":27,"column":1,"offset":3065},"end":{"line":27,"column":134,"offset":3198},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":3065},"end":{"line":27,"column":134,"offset":3198},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"eth_liquidity_pool = sqrt(constant_product / eth_price)","position":{"start":{"line":29,"column":3,"offset":3204},"end":{"line":29,"column":60,"offset":3261},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":3204},"end":{"line":29,"column":60,"offset":3261},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":3202},"end":{"line":29,"column":60,"offset":3261},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"token_liquidity_pool = sqrt(constant_product * eth_price)","position":{"start":{"line":30,"column":3,"offset":3265},"end":{"line":30,"column":62,"offset":3324},"indent":[]}}],"position":{"start":{"line":30,"column":3,"offset":3265},"end":{"line":30,"column":62,"offset":3324},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":3263},"end":{"line":30,"column":62,"offset":3324},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":3202},"end":{"line":30,"column":62,"offset":3324},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"So let’s look at the impact of a price change on a liquidity provider. To keep things simple, let’s imagine our liquidity provider supplies 1 ETH and 100 DAI to the Kwikswap DAI exchange, giving them 1% of a liquidity pool which contains 100 ETH and 10,000 DAI. This implies a price of 1 ETH = 100 DAI. Still neglecting fees, let’s imagine that after some trading, the price has changed; 1 ETH is now worth 120 DAI. What is the new value of the liquidity provider’s stake? Plugging the numbers into the formulae above, we have:","position":{"start":{"line":32,"column":1,"offset":3328},"end":{"line":32,"column":528,"offset":3855},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":3328},"end":{"line":32,"column":528,"offset":3855},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"eth_liquidity_pool = 91.2871","position":{"start":{"line":34,"column":3,"offset":3861},"end":{"line":34,"column":33,"offset":3891},"indent":[]}}],"position":{"start":{"line":34,"column":3,"offset":3861},"end":{"line":34,"column":33,"offset":3891},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":3859},"end":{"line":34,"column":33,"offset":3891},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"dai_liquidity_pool = 10954.4511","position":{"start":{"line":35,"column":3,"offset":3895},"end":{"line":35,"column":36,"offset":3928},"indent":[]}}],"position":{"start":{"line":35,"column":3,"offset":3895},"end":{"line":35,"column":36,"offset":3928},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":3893},"end":{"line":35,"column":36,"offset":3928},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":3859},"end":{"line":35,"column":36,"offset":3928},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"\"Since our liquidity provider has 1% of the liquidity tokens, this means they can now claim 0.9129 ETH and 109.54 DAI from the liquidity pool. But since DAI is approximately equivalent to USD, we might prefer to convert the entire amount into DAI to understand the overall impact of the price change. At the current price then, our liquidity is worth a total of 219.09 DAI. What if the liquidity provider had just held onto their original 1 ETH and 100 DAI? Well, now we can easily see that, at the new price, the total value would be 220 DAI. So our liquidity provider lost out by 0.91 DAI by providing liquidity to Kwikswap instead of just holding onto their initial ETH and DAI.\"","position":{"start":{"line":37,"column":1,"offset":3932},"end":{"line":37,"column":683,"offset":4614},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":3932},"end":{"line":37,"column":683,"offset":4614},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"\"Of course, if the price were to return to the same value as when the liquidity provider added their liquidity, this loss would disappear. ","position":{"start":{"line":39,"column":1,"offset":4618},"end":{"line":39,"column":140,"offset":4757},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"For this reason, we can call it an ","position":{"start":{"line":39,"column":142,"offset":4759},"end":{"line":39,"column":177,"offset":4794},"indent":[]}}],"position":{"start":{"line":39,"column":140,"offset":4757},"end":{"line":39,"column":179,"offset":4796},"indent":[]}},{"type":"text","value":"impermanent loss","position":{"start":{"line":39,"column":179,"offset":4796},"end":{"line":39,"column":195,"offset":4812},"indent":[]}},{"type":"strong","children":[{"type":"text","value":".","position":{"start":{"line":39,"column":197,"offset":4814},"end":{"line":39,"column":198,"offset":4815},"indent":[]}}],"position":{"start":{"line":39,"column":195,"offset":4812},"end":{"line":39,"column":200,"offset":4817},"indent":[]}},{"type":"text","value":" Using the equations above, we can derive a formula for the size of the impermanent loss in terms of the price ratio between when liquidity was supplied and now. We get the following:\"","position":{"start":{"line":39,"column":200,"offset":4817},"end":{"line":39,"column":384,"offset":5001},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":4618},"end":{"line":39,"column":384,"offset":5001},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"","position":{"start":{"line":41,"column":3,"offset":5007},"end":{"line":41,"column":4,"offset":5008},"indent":[]}},{"type":"inlineCode","value":"impermanent_loss = 2 * sqrt(price_ratio) / (1+price_ratio) — 1","position":{"start":{"line":41,"column":4,"offset":5008},"end":{"line":41,"column":68,"offset":5072},"indent":[]}},{"type":"text","value":"\"","position":{"start":{"line":41,"column":68,"offset":5072},"end":{"line":41,"column":69,"offset":5073},"indent":[]}}],"position":{"start":{"line":41,"column":3,"offset":5007},"end":{"line":41,"column":69,"offset":5073},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":5005},"end":{"line":41,"column":69,"offset":5073},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":5005},"end":{"line":41,"column":69,"offset":5073},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"to put it another way:\"","position":{"start":{"line":44,"column":3,"offset":5081},"end":{"line":44,"column":27,"offset":5105},"indent":[]}}],"position":{"start":{"line":44,"column":3,"offset":5081},"end":{"line":44,"column":27,"offset":5105},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 1.25x price change results in a 0.6% loss relative to HODL\"","position":{"start":{"line":46,"column":5,"offset":5113},"end":{"line":46,"column":67,"offset":5175},"indent":[]}}],"position":{"start":{"line":46,"column":5,"offset":5113},"end":{"line":46,"column":67,"offset":5175},"indent":[]}}],"position":{"start":{"line":46,"column":3,"offset":5111},"end":{"line":46,"column":67,"offset":5175},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 1.50x price change results in a 2.0% loss relative to HODL\"","position":{"start":{"line":47,"column":5,"offset":5181},"end":{"line":47,"column":67,"offset":5243},"indent":[]}}],"position":{"start":{"line":47,"column":5,"offset":5181},"end":{"line":47,"column":67,"offset":5243},"indent":[]}}],"position":{"start":{"line":47,"column":3,"offset":5179},"end":{"line":47,"column":67,"offset":5243},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 1.75x price change results in a 3.8% loss relative to HODL\"","position":{"start":{"line":48,"column":5,"offset":5249},"end":{"line":48,"column":67,"offset":5311},"indent":[]}}],"position":{"start":{"line":48,"column":5,"offset":5249},"end":{"line":48,"column":67,"offset":5311},"indent":[]}}],"position":{"start":{"line":48,"column":3,"offset":5247},"end":{"line":48,"column":67,"offset":5311},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 2x price change results in a 5.7% loss relative to HODL\"","position":{"start":{"line":49,"column":5,"offset":5317},"end":{"line":49,"column":64,"offset":5376},"indent":[]}}],"position":{"start":{"line":49,"column":5,"offset":5317},"end":{"line":49,"column":64,"offset":5376},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":5315},"end":{"line":49,"column":64,"offset":5376},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 3x price change results in a 13.4% loss relative to HODL\"","position":{"start":{"line":50,"column":5,"offset":5382},"end":{"line":50,"column":65,"offset":5442},"indent":[]}}],"position":{"start":{"line":50,"column":5,"offset":5382},"end":{"line":50,"column":65,"offset":5442},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":5380},"end":{"line":50,"column":65,"offset":5442},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 4x price change results in a 20.0% loss relative to HODL\"","position":{"start":{"line":51,"column":5,"offset":5448},"end":{"line":51,"column":65,"offset":5508},"indent":[]}}],"position":{"start":{"line":51,"column":5,"offset":5448},"end":{"line":51,"column":65,"offset":5508},"indent":[]}}],"position":{"start":{"line":51,"column":3,"offset":5446},"end":{"line":51,"column":65,"offset":5508},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"a 5x price change results in a 25.5% loss relative to HODL\"","position":{"start":{"line":52,"column":5,"offset":5514},"end":{"line":52,"column":65,"offset":5574},"indent":[]}}],"position":{"start":{"line":52,"column":5,"offset":5514},"end":{"line":52,"column":65,"offset":5574},"indent":[]}}],"position":{"start":{"line":52,"column":3,"offset":5512},"end":{"line":52,"column":65,"offset":5574},"indent":[]}}],"position":{"start":{"line":46,"column":3,"offset":5111},"end":{"line":52,"column":65,"offset":5574},"indent":[3,3,3,3,3,3]}}],"position":{"start":{"line":44,"column":1,"offset":5079},"end":{"line":53,"column":1,"offset":5576},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"\"N.B. The loss is the same whichever direction the price change occurs in (i.e. a doubling in price results in the same loss as a halving).\" -->","position":{"start":{"line":54,"column":3,"offset":5580},"end":{"line":54,"column":147,"offset":5724},"indent":[]}}],"position":{"start":{"line":54,"column":3,"offset":5580},"end":{"line":54,"column":147,"offset":5724},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":5578},"end":{"line":54,"column":147,"offset":5724},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":5079},"end":{"line":54,"column":147,"offset":5724},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</blockquote>","position":{"start":{"line":56,"column":1,"offset":5728},"end":{"line":56,"column":14,"offset":5741},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Understanding Returns\",\"tags\":\"pools, documentation\"}","position":{"start":{"line":59,"column":1,"offset":5745},"end":{"line":59,"column":92,"offset":5836},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":59,"column":92,"offset":5836}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Understanding Returns\",\n  \"tags\": \"pools, documentation\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Kwikswap incentivizes users to add liquidity to pools by rewarding providers with fees on trades. Market making, in general, is a complex activity which has the risk of losing money (compared to just\\xA0\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"hodling\"), \") in the case of big directional moves of the underlying asset price.\"), mdx(\"h1\", {\n    \"id\": \"example-from-the-article\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#example-from-the-article\",\n    \"aria-label\": \"example from the article permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Example from the article\"), mdx(\"blockquote\", null, mdx(\"p\", null, \"Consider the case where a liquidity provider adds 10,000 DAI and 100 WETH to a pool (for a total value of \", \"$\", \"20,000), the liquidity pool is now 100,000 DAI and 1,000 ETH in total. Because the amount supplied is equal to 10% of the total liquidity, the contract mints and sends the market maker \\u201Cliquidity tokens\\u201D which entitle them to 10% of the liquidity available in the pool. These are not speculative tokens to be traded. They are merely an accounting or bookkeeping tool to keep track of how much the liquidity providers are owed. If others subsequently add/withdraw coins, new liquidity tokens are minted/burned such that everyone\\u2019s relative percentage share of the liquidity pool remains the same.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Now let\\u2019s assume the price trades on Coinbase from $100 to $150. The Kwikswap contract should reflect this change as well after some arbitrage. Traders will add DAI and remove ETH until the new ratio is now 150:1.\")), mdx(\"p\", null, \"What happens to the liquidity provider? The contract reflects something closer to 122,400 DAI and 817 ETH (to check these numbers are accurate, 122,400 \", \"*\", \" 817 = 100,000,000 (our constant product) and 122,400 / 817 = 150, our new price). Withdrawing the 10% that we are entitled to would now yield 12,240 DAI and 81.7 ETH. The total market value here is $24,500. Roughly $500 worth of profit was missed out on as a result of the market making.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Obviously no one wants to provide liquidity out of charitable means, and the revenue isn\\u2019t dependent on the ability to flip out of good trades (there is no flipping). Instead, 0.3% of all trade volume is distributed proportionally to all liquidity providers. By default, these fees are put back into the liquidity pool, but can be collected any time. It\\u2019s difficult to know what the trade-off is between revenues from fees and losses from directional movements without knowing the amount of in-between trades. The more chop and back and forth, the better.\")), mdx(\"h2\", {\n    \"id\": \"why-is-my-liquidity-worth-less-than-i-put-in\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#why-is-my-liquidity-worth-less-than-i-put-in\",\n    \"aria-label\": \"why is my liquidity worth less than i put in permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Why is my liquidity worth less than I put in?\"), mdx(\"p\", null, \"To understand why the value of a liquidity provider\\u2019s stake can go down despite income from fees, we need to look a bit more closely at the formula used by Kwikswap to govern trading. The formula really is very simple. If we neglect trading fees, we have the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"eth_liquidity_pool * token_liquidity_pool = constant_product\"))), mdx(\"p\", null, \"In other words, the number of tokens a trader receives for their ETH and vice versa is calculated such that after the trade, the product of the two liquidity pools is the same as it was before the trade. The consequence of this formula is that for trades which are very small in value compared to the size of the liquidity pool we have:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"eth_price = token_liquidity_pool / eth_liquidity_pool\"))), mdx(\"p\", null, \"Combining these two equations, we can work out the size of each liquidity pool at any given price, assuming constant total liquidity:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"eth_liquidity_pool = sqrt(constant_product / eth_price)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"token_liquidity_pool = sqrt(constant_product * eth_price)\"))), mdx(\"p\", null, \"So let\\u2019s look at the impact of a price change on a liquidity provider. To keep things simple, let\\u2019s imagine our liquidity provider supplies 1 ETH and 100 DAI to the Kwikswap DAI exchange, giving them 1% of a liquidity pool which contains 100 ETH and 10,000 DAI. This implies a price of 1 ETH = 100 DAI. Still neglecting fees, let\\u2019s imagine that after some trading, the price has changed; 1 ETH is now worth 120 DAI. What is the new value of the liquidity provider\\u2019s stake? Plugging the numbers into the formulae above, we have:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"eth_liquidity_pool = 91.2871\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"dai_liquidity_pool = 10954.4511\"))), mdx(\"p\", null, \"\\u201CSince our liquidity provider has 1% of the liquidity tokens, this means they can now claim 0.9129 ETH and 109.54 DAI from the liquidity pool. But since DAI is approximately equivalent to USD, we might prefer to convert the entire amount into DAI to understand the overall impact of the price change. At the current price then, our liquidity is worth a total of 219.09 DAI. What if the liquidity provider had just held onto their original 1 ETH and 100 DAI? Well, now we can easily see that, at the new price, the total value would be 220 DAI. So our liquidity provider lost out by 0.91 DAI by providing liquidity to Kwikswap instead of just holding onto their initial ETH and DAI.\\u201D\"), mdx(\"p\", null, \"\\u201COf course, if the price were to return to the same value as when the liquidity provider added their liquidity, this loss would disappear. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"For this reason, we can call it an\\xA0\"), \"impermanent loss\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \".\"), \" Using the equations above, we can derive a formula for the size of the impermanent loss in terms of the price ratio between when liquidity was supplied and now. We get the following:\\u201D\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201D\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"impermanent_loss = 2 * sqrt(price_ratio) / (1+price_ratio) \\u2014 1\"), \"\\u201D\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u201Cto put it another way:\\u201D\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 1.25x price change results in a 0.6% loss relative to HODL\\u201D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 1.50x price change results in a 2.0% loss relative to HODL\\u201D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 1.75x price change results in a 3.8% loss relative to HODL\\u201D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 2x price change results in a 5.7% loss relative to HODL\\u201D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 3x price change results in a 13.4% loss relative to HODL\\u201D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 4x price change results in a 20.0% loss relative to HODL\\u201D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u201Ca 5x price change results in a 25.5% loss relative to HODL\\u201D\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u201CN.B. The loss is the same whichever direction the price change occurs in (i.e. a doubling in price results in the same loss as a halving).\\u201D \\u2014>\")))));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Understanding Returns\",\n  \"tags\": \"pools, documentation\"\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Kwikswap incentivizes users to add liquidity to pools by rewarding providers with fees on trades. Market making, in general, is a complex activity which has the risk of losing money (compared to just `}<strong parentName=\"p\">{`hodling`}</strong>{`) in the case of big directional moves of the underlying asset price.`}</p>\n    <h1 {...{\n      \"id\": \"example-from-the-article\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#example-from-the-article\",\n        \"aria-label\": \"example from the article permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Example from the article`}</h1>\n    <blockquote>\n      <p>{`Consider the case where a liquidity provider adds 10,000 DAI and 100 WETH to a pool (for a total value of `}{`$`}{`20,000), the liquidity pool is now 100,000 DAI and 1,000 ETH in total. Because the amount supplied is equal to 10% of the total liquidity, the contract mints and sends the market maker “liquidity tokens” which entitle them to 10% of the liquidity available in the pool. These are not speculative tokens to be traded. They are merely an accounting or bookkeeping tool to keep track of how much the liquidity providers are owed. If others subsequently add/withdraw coins, new liquidity tokens are minted/burned such that everyone’s relative percentage share of the liquidity pool remains the same.`}</p>\n      <p><strong parentName=\"p\">{`Now let’s assume the price trades on Coinbase from $100 to $150. The Kwikswap contract should reflect this change as well after some arbitrage. Traders will add DAI and remove ETH until the new ratio is now 150:1.`}</strong></p>\n      <p>{`What happens to the liquidity provider? The contract reflects something closer to 122,400 DAI and 817 ETH (to check these numbers are accurate, 122,400 `}{`*`}{` 817 = 100,000,000 (our constant product) and 122,400 / 817 = 150, our new price). Withdrawing the 10% that we are entitled to would now yield 12,240 DAI and 81.7 ETH. The total market value here is $24,500. Roughly $500 worth of profit was missed out on as a result of the market making.`}</p>\n      <p><strong parentName=\"p\">{`Obviously no one wants to provide liquidity out of charitable means, and the revenue isn’t dependent on the ability to flip out of good trades (there is no flipping). Instead, 0.3% of all trade volume is distributed proportionally to all liquidity providers. By default, these fees are put back into the liquidity pool, but can be collected any time. It’s difficult to know what the trade-off is between revenues from fees and losses from directional movements without knowing the amount of in-between trades. The more chop and back and forth, the better.`}</strong></p>\n      <h2 {...{\n        \"id\": \"why-is-my-liquidity-worth-less-than-i-put-in\",\n        \"style\": {\n          \"position\": \"relative\"\n        }\n      }}><a parentName=\"h2\" {...{\n          \"href\": \"#why-is-my-liquidity-worth-less-than-i-put-in\",\n          \"aria-label\": \"why is my liquidity worth less than i put in permalink\",\n          \"className\": \"anchor before\"\n        }}><svg parentName=\"a\" {...{\n            \"aria-hidden\": \"true\",\n            \"focusable\": \"false\",\n            \"height\": \"16\",\n            \"version\": \"1.1\",\n            \"viewBox\": \"0 0 16 16\",\n            \"width\": \"16\"\n          }}><path parentName=\"svg\" {...{\n              \"fillRule\": \"evenodd\",\n              \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n            }}></path></svg></a>{`Why is my liquidity worth less than I put in?`}</h2>\n      <p>{`To understand why the value of a liquidity provider’s stake can go down despite income from fees, we need to look a bit more closely at the formula used by Kwikswap to govern trading. The formula really is very simple. If we neglect trading fees, we have the following:`}</p>\n      <ul>\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`eth_liquidity_pool * token_liquidity_pool = constant_product`}</inlineCode></li>\n      </ul>\n      <p>{`In other words, the number of tokens a trader receives for their ETH and vice versa is calculated such that after the trade, the product of the two liquidity pools is the same as it was before the trade. The consequence of this formula is that for trades which are very small in value compared to the size of the liquidity pool we have:`}</p>\n      <ul>\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`eth_price = token_liquidity_pool / eth_liquidity_pool`}</inlineCode></li>\n      </ul>\n      <p>{`Combining these two equations, we can work out the size of each liquidity pool at any given price, assuming constant total liquidity:`}</p>\n      <ul>\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`eth_liquidity_pool = sqrt(constant_product / eth_price)`}</inlineCode></li>\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`token_liquidity_pool = sqrt(constant_product * eth_price)`}</inlineCode></li>\n      </ul>\n      <p>{`So let’s look at the impact of a price change on a liquidity provider. To keep things simple, let’s imagine our liquidity provider supplies 1 ETH and 100 DAI to the Kwikswap DAI exchange, giving them 1% of a liquidity pool which contains 100 ETH and 10,000 DAI. This implies a price of 1 ETH = 100 DAI. Still neglecting fees, let’s imagine that after some trading, the price has changed; 1 ETH is now worth 120 DAI. What is the new value of the liquidity provider’s stake? Plugging the numbers into the formulae above, we have:`}</p>\n      <ul>\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`eth_liquidity_pool = 91.2871`}</inlineCode></li>\n        <li parentName=\"ul\"><inlineCode parentName=\"li\">{`dai_liquidity_pool = 10954.4511`}</inlineCode></li>\n      </ul>\n      <p>{`“Since our liquidity provider has 1% of the liquidity tokens, this means they can now claim 0.9129 ETH and 109.54 DAI from the liquidity pool. But since DAI is approximately equivalent to USD, we might prefer to convert the entire amount into DAI to understand the overall impact of the price change. At the current price then, our liquidity is worth a total of 219.09 DAI. What if the liquidity provider had just held onto their original 1 ETH and 100 DAI? Well, now we can easily see that, at the new price, the total value would be 220 DAI. So our liquidity provider lost out by 0.91 DAI by providing liquidity to Kwikswap instead of just holding onto their initial ETH and DAI.”`}</p>\n      <p>{`“Of course, if the price were to return to the same value as when the liquidity provider added their liquidity, this loss would disappear. `}<strong parentName=\"p\">{`For this reason, we can call it an `}</strong>{`impermanent loss`}<strong parentName=\"p\">{`.`}</strong>{` Using the equations above, we can derive a formula for the size of the impermanent loss in terms of the price ratio between when liquidity was supplied and now. We get the following:”`}</p>\n      <ul>\n        <li parentName=\"ul\">{`”`}<inlineCode parentName=\"li\">{`impermanent_loss = 2 * sqrt(price_ratio) / (1+price_ratio) — 1`}</inlineCode>{`”`}</li>\n      </ul>\n      <ul>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`“to put it another way:”`}</p>\n          <ul parentName=\"li\">\n            <li parentName=\"ul\">{`“a 1.25x price change results in a 0.6% loss relative to HODL”`}</li>\n            <li parentName=\"ul\">{`“a 1.50x price change results in a 2.0% loss relative to HODL”`}</li>\n            <li parentName=\"ul\">{`“a 1.75x price change results in a 3.8% loss relative to HODL”`}</li>\n            <li parentName=\"ul\">{`“a 2x price change results in a 5.7% loss relative to HODL”`}</li>\n            <li parentName=\"ul\">{`“a 3x price change results in a 13.4% loss relative to HODL”`}</li>\n            <li parentName=\"ul\">{`“a 4x price change results in a 20.0% loss relative to HODL”`}</li>\n            <li parentName=\"ul\">{`“a 5x price change results in a 25.5% loss relative to HODL”`}</li>\n          </ul>\n        </li>\n        <li parentName=\"ul\">\n          <p parentName=\"li\">{`“N.B. The loss is the same whichever direction the price change occurs in (i.e. a doubling in price results in the same loss as a halving).” —>`}</p>\n        </li>\n      </ul>\n    </blockquote>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}